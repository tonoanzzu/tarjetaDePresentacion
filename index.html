<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tarjeta de presentacion</title>
</head>

<body>
    <presentation-card-joaz nombre=null apellido=null email=null></presentation-card-joaz>
</body>
<script>
    class PresentationCard extends HTMLElement {
        constructor() {
            super();
            this.nombre = null;
            this.apellido = null;
            this.email = null;

        }
        connectedCallback() {

            let shadowRoot = this.attachShadow({
                mode: 'open'
            });

            let div = document.createElement('div');
            div.textContent = '';
            shadowRoot.appendChild(div);

        }

        disconnectedCallback() {
            console.log('disconnected!');
        }

        pintarMensaje(msj) {
            this.innerHTML = msj;
        }

        attributeChangedCallback(name, oldVal, newVal) {
            //definicion de reglas
            console.log(`Attributos modificados!`);
            console.log(this);

            if (name === 'nombre') {
                if (newVal === 'antonio') {
                    console.log('SOY YO! Mi correo pertence a SKYNET');
                    this.pintarMensaje('SOY YO! Mi correo pertence a SKYNET');
                }
            }

            if (name === 'email') {

                if (newVal.indexOf("gmail") > -1) {
                    //console.log('Mi correo pertence a SKYNET')
                    this.pintarMensaje('Mi correo pertence a SKYNET');
                }
            }

        }

        static get observedAttributes() {
            return ['nombre', 'apellido', 'email'];
        }

    }

    window.customElements.define('presentation-card-joaz', PresentationCard);
</script>

</html>